<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="card-title">Equipamentos</h3>
        <%= link_to new_equipment_path, class: 'btn btn-primary btn-sm' do %>
          <i class="fas fa-plus"></i> Novo Equipamento
        <% end %>
      </div>
      <div class="card-body">
        <%= form_tag equipments_path, method: :get, class: 'mb-4' do %>
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <%= text_field_tag :q, params[:q], class: 'form-control', placeholder: 'Buscar por código, nome, marca, modelo...' %>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <%= select_tag :category_id, options_from_collection_for_select(@categories, :id, :name, params[:category_id]), include_blank: 'Todas as categorias', class: 'form-control' %>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <%= submit_tag 'Filtrar', class: 'btn btn-primary' %>
                <%= link_to 'Limpar', equipments_path, class: 'btn btn-secondary ml-2' %>
              </div>
            </div>
          </div>
        <% end %>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th>Código</th>
                <th>Nome</th>
                <th>Categoria</th>
                <th>Status</th>
                <th>Controle</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <% @equipments.each do |equipment| %>
                <tr>
                  <td><%= equipment.code %></td>
                  <td><%= equipment.name %></td>
                  <td><%= equipment.category&.name %></td>
                  <td>
                    <span class="badge badge-<%= equipment_status_badge(equipment.status) %>">
                      <%= equipment.status.text %>
                    </span>
                  </td>
                  <td><%= equipment.control_type.text %></td>
                  <td>
                    <div class="btn-group">
                      <%= link_to equipment_path(equipment), class: 'btn btn-info btn-sm', title: 'Visualizar' do %>
                        <i class="fas fa-eye"></i>
                      <% end %>
                      <%= link_to edit_equipment_path(equipment), class: 'btn btn-primary btn-sm', title: 'Editar' do %>
                        <i class="fas fa-edit"></i>
                      <% end %>
                      <%= link_to equipment_path(equipment), method: :delete, data: { confirm: 'Tem certeza que deseja excluir este equipamento?' }, class: 'btn btn-danger btn-sm', title: 'Excluir' do %>
                        <i class="fas fa-trash"></i>
                      <% end %>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <div class="d-flex justify-content-center">
          <%= paginate @equipments %>
        </div>
      </div>
    </div>
  </div>
</div>
